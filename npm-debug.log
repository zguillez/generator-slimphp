0 info it worked if it ends with ok
1 verbose cli [ '/usr/local/Cellar/node/0.10.29/bin/node',
1 verbose cli   '/usr/local/bin/npm',
1 verbose cli   'publish' ]
2 info using npm@3.10.6
3 info using node@v5.8.0
4 verbose publish [ '.' ]
5 silly cache add args [ '.', null ]
6 verbose cache add spec .
7 silly cache add parsed spec Result {
7 silly cache add   raw: '.',
7 silly cache add   scope: null,
7 silly cache add   escapedName: null,
7 silly cache add   name: null,
7 silly cache add   rawSpec: '.',
7 silly cache add   spec: '/Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp',
7 silly cache add   type: 'directory' }
8 verbose addLocalDirectory /Users/zguillez/.npm/generator-slimphp/1.3.0/package.tgz not in flight; packing
9 verbose correctMkdir /Users/zguillez/.npm correctMkdir not in flight; initializing
10 info lifecycle generator-slimphp@1.3.0~prepublish: generator-slimphp@1.3.0
11 verbose lifecycle generator-slimphp@1.3.0~prepublish: unsafe-perm in lifecycle true
12 verbose lifecycle generator-slimphp@1.3.0~prepublish: PATH: /usr/local/lib/node_modules/npm/bin/node-gyp-bin:/Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp/node_modules/.bin:/usr/local/Cellar/node/0.10.29/bin:/usr/local/php5/bin:/usr/local/sbin:/usr/local/sbin:/usr/local/sbin:/usr/local/sbin:/usr/local/sbin:/Users/zguillez/.rvm/gems/ruby-2.2.1/bin:/Users/zguillez/.rvm/gems/ruby-2.2.1@global/bin:/Users/zguillez/.rvm/rubies/ruby-2.2.1/bin:/Users/zguillez/.rbenv/shims:/Users/zguillez/.rbenv/shims:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/git/bin:/Users/zguillez/Documents/Android/sdk/platform-tools:/Users/zguillez/Documents/Android/sdk/tools:/Users/zguillez/.rvm/bin
13 verbose lifecycle generator-slimphp@1.3.0~prepublish: CWD: /Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp
14 silly lifecycle generator-slimphp@1.3.0~prepublish: Args: [ '-c', 'gulp prepublish' ]
15 silly lifecycle generator-slimphp@1.3.0~prepublish: Returned: code: 0  signal: null
16 verbose tar pack [ '/Users/zguillez/.npm/generator-slimphp/1.3.0/package.tgz',
16 verbose tar pack   '/Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp' ]
17 verbose tarball /Users/zguillez/.npm/generator-slimphp/1.3.0/package.tgz
18 verbose folder /Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp
19 verbose addLocalTarball adding from inside cache /Users/zguillez/.npm/generator-slimphp/1.3.0/package.tgz
20 verbose correctMkdir /Users/zguillez/.npm correctMkdir not in flight; initializing
21 silly cache afterAdd generator-slimphp@1.3.0
22 verbose afterAdd /Users/zguillez/.npm/generator-slimphp/1.3.0/package/package.json not in flight; writing
23 verbose correctMkdir /Users/zguillez/.npm correctMkdir not in flight; initializing
24 verbose afterAdd /Users/zguillez/.npm/generator-slimphp/1.3.0/package/package.json written
25 silly publish { name: 'generator-slimphp',
25 silly publish   version: '1.3.0',
25 silly publish   description: 'Yeoman generator for backend API development with Slimframework 3 (PHP)',
25 silly publish   homepage: '',
25 silly publish   author:
25 silly publish    { name: 'Guillermo de la Iglesia',
25 silly publish      email: 'mail@zguillez.io',
25 silly publish      url: 'https://github.com/zguillez' },
25 silly publish   files: [ 'generators' ],
25 silly publish   main: 'generators/index.js',
25 silly publish   keywords: [ 'yeoman-generator', 'Slim', 'Slimframework', 'Php' ],
25 silly publish   dependencies:
25 silly publish    { 'yeoman-generator': '^0.24.1',
25 silly publish      chalk: '^1.1.3',
25 silly publish      yosay: '^1.2.0' },
25 silly publish   devDependencies:
25 silly publish    { 'yeoman-test': '^1.4.0',
25 silly publish      'yeoman-assert': '^2.2.1',
25 silly publish      eslint: '^3.3.1',
25 silly publish      'eslint-config-xo-space': '^0.14.0',
25 silly publish      gulp: '^3.9.1',
25 silly publish      'gulp-eslint': '^3.0.1',
25 silly publish      'gulp-exclude-gitignore': '^1.0.0',
25 silly publish      'gulp-line-ending-corrector': '^1.0.1',
25 silly publish      'gulp-istanbul': '^1.1.0',
25 silly publish      'gulp-mocha': '^3.0.1',
25 silly publish      'gulp-plumber': '^1.1.0',
25 silly publish      'gulp-nsp': '^2.4.2',
25 silly publish      'gulp-coveralls': '^0.1.4',
25 silly publish      bower: '^1.7.9',
25 silly publish      grunt: '^1.0.1',
25 silly publish      'grunt-contrib-connect': '~1.0.2',
25 silly publish      'load-grunt-tasks': '^3.5.2' },
25 silly publish   eslintConfig: { extends: 'xo-space', env: { mocha: true } },
25 silly publish   repository: { type: 'git', url: '/zguillez/generator-slimphp' },
25 silly publish   scripts: { prepublish: 'gulp prepublish', test: 'gulp' },
25 silly publish   license: 'Apache-2.0',
25 silly publish   readme: '# generator-slimphp\n\n[![npm version](https://badge.fury.io/js/generator-slimphp.svg)](https://badge.fury.io/js/generator-slimphp)\n[![Build Status](http://img.shields.io/travis/zguillez/generator-slimphp.svg)](https://travis-ci.org/zguillez/generator-slimphp)\n[![Code Climate](http://img.shields.io/codeclimate/github/zguillez/generator-slimphp.svg)](https://codeclimate.com/github/zguillez/generator-slimphp)\n[![Dependency Status](https://gemnasium.com/zguillez/generator-slimphp.svg)](https://gemnasium.com/zguillez/generator-slimphp)\n[![Installs](https://img.shields.io/npm/dt/generator-slimphp.svg)](https://coveralls.io/r/zguillez/generator-slimphp)\n![](https://reposs.herokuapp.com/?path=zguillez/generator-slimphp)\n[![License](http://img.shields.io/:license-mit-blue.svg)](http://doge.mit-license.org)\n[![Join the chat at https://gitter.im/zguillez/generator-slimphp](https://badges.gitter.im/zguillez/generator-slimphp.svg)](https://gitter.im/zguillez/generator-slimphp?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)\n\n> [Zguillez](https://zguillez.io) | Guillermo de la Iglesia\n\n## Yeoman generator for backend API development with Slimframework 3 (PHP)\n![](http://zguillez.github.io/img/slimphp.png)\n\n# Getting Started\n## Install Yeoman\n\n```\nnpm install -g yo\n```\n\n## Yeoman Generators\nTo install generator-slimphp from npm, run:\n\n```\nnpm install -g generator-slimphp\n\n//or:\nsudo npm install -g generator-slimphp\n```\n\nFinally, initiate the generator:\n\n```\nyo slimphp\n```\n\nInstall composer dependences manually:\n\n```bash\n./composer.phar self-update && ./composer.phar install\n```\n\n## Requeriments\n### [Composer](https://getcomposer.org/)\nFor update composer\n\n```\n./composer.phar self-update\n```\n\n**Documentation:**\n- [https://getcomposer.org/](https://getcomposer.org/)\n\n# Usage\nDevelop code on folder **/inc**\n\n```\n/inc\n    /app.php\n    /config.php\n    /routes\n        /index.php\n        /user-add.php\n        /user.php\n        /etc..\n```\n\n## Compile code\nUse grunt task to compile code and deploy api\n\n```\ngrunt serve\n```\n\nTHis will launch server on port 9001\n\n```\nhttp://localhost:9001/\n```\n\nDistribute code is compileded on forder **/dist**\n\n```\n/dist\n    .htaccess\n    /inc\n    /index.php\n    /vendor\n```\n\n# Data base configuration\n\nEdit file **/inc/config.php** for Database configuration\n\n```\n$ip       = \'*.*.*.*\';\n$user     = \'********\';\n$password = \'********\';\n$database = \'********\';\n$api->database($ip, $user, $password, $database);\n```\n\nIf you API don\'t connect to any database, comment the require of the config file:\n\n```\n// index.php\n\n<?php\n\nrequire \'vendor/autoload.php\';\nrequire \'inc/app.php\';\nrequire \'inc/routes.php\';\n//require \'inc/config.php\';\n....\n```\n\n# API Routes\n\nPut all your API urls into the file **/inc/routes.php**\n\n```\n// inc/routes\n<?php\n\n...\n$api->route(\'/\', \'GET\', require \'inc/routes/index.php\');\n...\n```\n\nIf your app is on a folder (for example \'**/api**\') uncomment this line:\n\n```\n//$api->folder(\'api\');\n```\nThis will work for **http://domain.com/api/** path.\n\nIn the **/inc/routes/** folder make a induvidual file for the path function:\n\n```\n// inc/routes/index.php\n\n<?php\n\nreturn function ($request, $response, $args) {\n\tglobal $api;\n\t$html = \'\n\t\t<h2>Routes</h2>\n\t\t<ul>\n\t\t<li>/</li>\n\t\t<li>/user/{token}</li>\n\t\t<li>/user/add/</li>\n\t\t</ul>\n\t\t\';\n\n\treturn $api->response($response, $html, 200, \'text/html\');\n};\n```\n\nThis will return an HTML file for the path http://localhost:9001/\n\nYou can change the status response, for example to 404:\n\n```\nreturn $api->response($response, $html, 404, \'text/html\');\n```\n\nAnd the header content-type:\n\t\n```\nreturn $api->response($response, $html, 200, \'application/json\');\n```\n\n## Queries to the database\n\nMake the SQL queries in the routes files to the global object **$api**:\n\n```\t\n// inc/routes/user.php\n\n<?php\n\nreturn function ($request, $response, $args) {\n\tglobal $api;\n\t$token = $request->getAttribute(\'token\');\n\t$data = $api->query("SELECT * FROM users WHERE token=\'" . $token . "\'");\n\n\treturn $api->response($response, json_encode($data), 200, \'application/json\');\n};\n```\n\nThis will return some data to the dummy api url:\n\n```\n// index.php\n<?php\n\n...\n$api->route(\'/user/{token}\', \'GET\', require \'inc/routes/user.php\');\n...\n```\n\n# GET or POST\n\nYou can do api call in GET or POST method:\n\n```\n// index.php\n<?php\n\n...\n$api->route(\'/user/{token}\', \'GET\', require \'inc/routes/user.php\');\n$api->route(\'/user/add/\', \'POST\', require \'inc/routes/user-add.php\');\n...\n```\n\nTo get POST data use the **getParseBody()** function:\n\n```\n// inc/routes/user-add.php\n\n<?php\n\nreturn function ($request, $response, $args) {\n\tglobal $api;\n\t$data = $request->getParsedBody();\n\t$sql = "INSERT IGNORE INTO users (name, surname, email, phone, contact, token, ip) VALUES(\'" . $data["name"] . "\',\'" . $data["surname"] . "\',\'" . $data["email"] . "\',\'" . $data["phone"] . "\',\'" . $data["contact"] . "\',\'" . $data["token"] . "\',\'" . $_SERVER[\'REMOTE_ADDR\'] . "\')";\n\t$leadid = $api->query($sql);\n\tif ($leadid > 0) {\n\t\t$status = 1;\n\t\t$result["leadid"] = $leadid;\n\t} else {\n\t\t$status = 0;\n\t\t$result["error"] = "Not inserted";\n\t}\n\n\treturn $api->response($response, json_encode(Array(\'status\' => $status, \'result\' => $result)), 200, \'application/json\');\n};\n```\n\n# Mobile-Detect\n\nMobile detection for api calls is implemented. \n\n```\n{\n  "require": {\n    "slim/slim": "^3.0",\n    "zguillez/slim-mobile-detect": "^1.0"\n  }\n}\n```\n\nSo you can edit the **response** function on app.php file:\n\n```\npublic function response($response, $data = \'\', $status = 200, $type = \'text/html\')\n{\n\t$response = new MobileResponse($response);\n\treturn $response->withStatus($status)->withHeader(\'Content-type\', $type)->write($data);\n}\n```\n\nFor more info check:\n\n* [https://github.com/zguillez/slim-mobile-detect](https://github.com/zguillez/slim-mobile-detect)\n* [https://packagist.org/packages/zguillez/slim-mobile-detect](https://packagist.org/packages/zguillez/slim-mobile-detect)\n\n\n\n# Tools\n\n## validateData\n\nThis function will check if a list of parameter are passed in POST data:\n\n```\nif ($api->validateData($data, [\'name\', \'email\'])) {\n\t...\n} else {\n\t//error: no \'name\' or \'email\' parameter\n}\n```\n\n## validateEmptyData\n\nThis function will check if a list of parameter are empty in POST data:\n\n```\nif ($api->validateEmptyData($data, [\'name\', \'email\'])) {\n\t...\n} else {\n\t//error: \'name\' or \'email\' have empty value\n}\n```\n\n\n# Contributing and issues\nContributors are welcome, please fork and send pull requests! If you have any ideas on how to make this project better then please submit an issue or send me an [email](mailto:mail@zguillez.io).\n\n# License\n©2016 Zguillez.io\n\nOriginal code licensed under [MIT](https://en.wikipedia.org/wiki/MIT_License) Open Source projects used within this project retain their original licenses.\n\n# Changelog\n### v1.3.0 (August 23, 2016)\n- Core update\n- Update dependencies\n- Implements MobileResponse \n- validateData and validateEmptyData methods\n\n# Changelog\n### v1.1.0 (March 24, 2016)\n- Allow DELETE and PUT methods\n\n### v1.0.0 (January 12, 2016)\n- Fix yo install version\n\n### v0.1.0 (January 7, 2016)\nInitial Slim Framework skeleton\n\nFeatures:\n\n* Slimframework\n* External route files\n* Grunt tasks\n\n[![Analytics](https://ga-beacon.appspot.com/UA-1125217-30/zguillez/generator-slimphp?pixel)](https://github.com/igrigorik/ga-beacon)',
25 silly publish   readmeFilename: 'README.md',
25 silly publish   gitHead: '03cd55fc159b0ebb3c5fe7a20973a381ce55885f',
25 silly publish   _id: 'generator-slimphp@1.3.0',
25 silly publish   _shasum: '0d0cdaee8602d716010f8b25e7b00bf3ea1f728d',
25 silly publish   _from: '.' }
26 verbose getPublishConfig undefined
27 silly mapToRegistry name generator-slimphp
28 silly mapToRegistry using default registry
29 silly mapToRegistry registry https://registry.npmjs.org/
30 silly mapToRegistry data Result {
30 silly mapToRegistry   raw: 'generator-slimphp',
30 silly mapToRegistry   scope: null,
30 silly mapToRegistry   escapedName: 'generator-slimphp',
30 silly mapToRegistry   name: 'generator-slimphp',
30 silly mapToRegistry   rawSpec: '',
30 silly mapToRegistry   spec: 'latest',
30 silly mapToRegistry   type: 'tag' }
31 silly mapToRegistry uri https://registry.npmjs.org/generator-slimphp
32 verbose publish registryBase https://registry.npmjs.org/
33 silly publish uploading /Users/zguillez/.npm/generator-slimphp/1.3.0/package.tgz
34 verbose request uri https://registry.npmjs.org/generator-slimphp
35 verbose request sending authorization for write operation
36 info attempt registry request try #1 at 11:34:27
37 verbose request using bearer token for auth
38 verbose request id 6e4641feeffd49c6
39 http request PUT https://registry.npmjs.org/generator-slimphp
40 http 403 https://registry.npmjs.org/generator-slimphp
41 verbose headers { 'content-type': 'application/json',
41 verbose headers   'cache-control': 'max-age=300',
41 verbose headers   'content-length': '95',
41 verbose headers   'accept-ranges': 'bytes',
41 verbose headers   date: 'Tue, 23 Aug 2016 09:34:29 GMT',
41 verbose headers   via: '1.1 varnish',
41 verbose headers   connection: 'keep-alive',
41 verbose headers   'x-served-by': 'cache-fra1236-FRA',
41 verbose headers   'x-cache': 'MISS',
41 verbose headers   'x-cache-hits': '0',
41 verbose headers   'x-timer': 'S1471944867.741477,VS0,VE1527',
41 verbose headers   vary: 'Accept-Encoding' }
42 verbose request invalidating /Users/zguillez/.npm/registry.npmjs.org/generator-slimphp on PUT
43 error publish Failed PUT 403
44 verbose stack Error: "You cannot publish over the previously published version 1.3.0." : generator-slimphp
44 verbose stack     at makeError (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:264:12)
44 verbose stack     at CachingRegistryClient.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:252:14)
44 verbose stack     at Request._callback (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:172:14)
44 verbose stack     at Request.self.callback (/usr/local/lib/node_modules/npm/node_modules/request/request.js:200:22)
44 verbose stack     at emitTwo (events.js:100:13)
44 verbose stack     at Request.emit (events.js:185:7)
44 verbose stack     at Request.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/request/request.js:1067:10)
44 verbose stack     at emitOne (events.js:95:20)
44 verbose stack     at Request.emit (events.js:182:7)
44 verbose stack     at IncomingMessage.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/request/request.js:988:12)
45 verbose statusCode 403
46 verbose pkgid generator-slimphp
47 verbose cwd /Users/zguillez/Documents/SVN/YEOMAN/generator-slimphp
48 error Darwin 14.5.0
49 error argv "/usr/local/Cellar/node/0.10.29/bin/node" "/usr/local/bin/npm" "publish"
50 error node v5.8.0
51 error npm  v3.10.6
52 error code E403
53 error "You cannot publish over the previously published version 1.3.0." : generator-slimphp
54 error If you need help, you may report this error at:
54 error     <https://github.com/npm/npm/issues>
55 verbose exit [ 1, true ]
