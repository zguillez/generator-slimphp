let isNameValid=!1,isLastnameValid=!1,isEmailValid=!1,isAttachmentValid=!1,isLegalValid=!1;document.getElementById("form").onsubmit=e=>{if(e.preventDefault(),checkInputs()){const e={name:document.getElementById("name").value,lastname:document.getElementById("lastname").value,email:document.getElementById("email").value,attachment:document.getElementById("fileUpload").querySelector('input[name="token"]').value};axios.post("/users/",e).then(e=>{console.log(e.data),1===e.data.status&&(document.getElementById("form").style.display="none",document.getElementById("thanks").style.display="block")}).catch(e=>console.log("Error: ",e))}},document.getElementById("file").onchange=e=>{e.preventDefault();let l=new FileReader,t=document.getElementById("fileUpload").querySelector('input[name="file"]').files[0],a=document.getElementById("fileUpload").querySelector('input[name="file"]').files[0].name;t&&(l.readAsDataURL(t),l.onload=()=>{axios.post("/upload/",{fileName:a,base64:l.result}).then(e=>{console.log(e.data),document.getElementById("fileUpload").querySelector('input[name="url"]').value=e.data.url,document.getElementById("fileUpload").querySelector('input[name="token"]').value=e.data.token,document.getElementById("fileUpload").querySelector('input[name="file"]').classList.remove("error"),this.isArchivoValid=!0}).catch(e=>{console.log("Error: ",e),document.getElementById("fileUpload").querySelector('input[name="file"]').classList.add("error"),this.isArchivoValid=!1})},l.onerror=e=>{console.log("Error: ",e)})};const checkInputs=()=>{isLegalValid=document.getElementById("legal").checked,console.log(isNameValid,isLastnameValid,isEmailValid,isAttachmentValid,isLegalValid);const e=document.querySelectorAll(".validate");for(let l=0;l<e.length;l++)validaterInput(e[l],!1);return isNameValid&&isLastnameValid&&isEmailValid?isAttachmentValid?!!isLegalValid||(alert("You must agree"),!1):(alert("You must upload file"),!1):(alert("All fields are required"),!1)},validaterInput=(e,l)=>{let t,a;return this["is"+e.id[0].toUpperCase()+e.id.slice(1)+"Valid"]=!1,"email"===e.id?(a=/(^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z]{2,4})+$)/,t="Invalid email"):"telefono"===e.id?(a=/^(6|7)([0-9]){8}$/,t="Invalid phone number (9 digits)"):(a=/^[a-zA-ZÀ-ÿ\u00f1\u00d1 ·\-]{2,}$/,t="Invalid format"),""===e.value?(e.classList.add("error"),l&&alert("Empty field"),!1):a.test(e.value)?(e.classList.remove("error"),this["is"+e.id[0].toUpperCase()+e.id.slice(1)+"Valid"]=!0,!0):(e.classList.add("error"),l&&alert(t),!1)};